{
  "name": "agent-memory-indexer",
  "displayName": "Agent Memory Indexer",
  "description": "Local RAG for GitHub Copilot - Index your codebase into a vector database for enhanced AI-powered code search and understanding",
  "version": "0.0.14",
  "icon": "media/memory.jpg",
  "publisher": "yensubldg",
  "repository": {
    "type": "git",
    "url": "https://github.com/yensubldg/Agent-Memory"
  },
  "homepage": "https://marketplace.visualstudio.com/items?itemName=yensubldg.agent-memory-indexer",
  "engines": {
    "vscode": "^1.106.1"
  },
  "categories": [
    "Other"
  ],
  "activationEvents": [
    "onStartupFinished"
  ],
  "main": "./dist/extension.js",
  "contributes": {
    "commands": [
      {
        "command": "agent-memory.indexFile",
        "title": "Add File to Memory Index"
      },
      {
        "command": "agent-memory.indexFolder",
        "title": "Add Folder to Memory Index",
        "icon": "$(folder)"
      },
      {
        "command": "agent-memory.showIndexedFiles",
        "title": "Agent Memory: Show Indexed Files"
      },
      {
        "command": "agent-memory.refreshView",
        "title": "Refresh",
        "icon": "$(refresh)"
      },
      {
        "command": "agent-memory.clearAll",
        "title": "Clear All Memory Indexes",
        "icon": "$(trash)"
      },
      {
        "command": "agent-memory.deleteFile",
        "title": "Remove from Memory",
        "icon": "$(close)"
      },
      {
        "command": "agent-memory.deleteFolder",
        "title": "Remove Folder from Memory",
        "icon": "$(trash)"
      },
      {
        "command": "agent-memory.viewFileChunks",
        "title": "View Chunks",
        "icon": "$(eye)"
      },
      {
        "command": "agent-memory.viewFileVectors",
        "title": "View Vectors",
        "icon": "$(graph)"
      }
    ],
    "viewsContainers": {
      "activitybar": [
        {
          "id": "agent-memory-container",
          "title": "Agent Memory",
          "icon": "$(database)"
        }
      ]
    },
    "views": {
      "agent-memory-container": [
        {
          "id": "agentMemoryView",
          "name": "Indexed Files",
          "icon": "$(database)"
        }
      ]
    },
    "menus": {
      "view/title": [
        {
          "command": "agent-memory.refreshView",
          "when": "view == agentMemoryView",
          "group": "navigation@1"
        },
        {
          "command": "agent-memory.clearAll",
          "when": "view == agentMemoryView",
          "group": "navigation@2"
        }
      ],
      "view/item/context": [
        {
          "command": "agent-memory.viewFileChunks",
          "when": "view == agentMemoryView && viewItem == memoryFile",
          "group": "inline@1"
        },
        {
          "command": "agent-memory.viewFileVectors",
          "when": "view == agentMemoryView && viewItem == memoryFile",
          "group": "inline@2"
        },
        {
          "command": "agent-memory.deleteFile",
          "when": "view == agentMemoryView && viewItem == memoryFile",
          "group": "inline@3"
        },
        {
          "command": "agent-memory.deleteFolder",
          "when": "view == agentMemoryView && viewItem == memoryFolder",
          "group": "inline"
        }
      ],
      "explorer/context": [
        {
          "command": "agent-memory.indexFile",
          "when": "!explorerResourceIsFolder",
          "group": "agentMemory@1"
        },
        {
          "command": "agent-memory.indexFolder",
          "when": "explorerResourceIsFolder",
          "group": "agentMemory@2"
        }
      ],
      "commandPalette": [
        {
          "command": "agent-memory.indexFile",
          "when": "editorIsOpen"
        },
        {
          "command": "agent-memory.indexFolder"
        }
      ]
    },
    "chatParticipants": [
      {
        "id": "agent.memory",
        "name": "memory",
        "fullName": "Memory",
        "description": "Ask questions about indexed code",
        "isSticky": true
      }
    ],
    "languageModelTools": [
      {
        "name": "agent-memory_search_memory",
        "tags": [
          "memory",
          "search",
          "code",
          "rag"
        ],
        "toolReferenceName": "searchMemory",
        "displayName": "Search Memory",
        "icon": "$(search)",
        "userDescription": "Search through indexed code in the memory database",
        "modelDescription": "Searches the vector database for code snippets that are semantically similar to the query. Use this tool when you need to find relevant code from previously indexed files. Returns matching code snippets with their file paths. Best used for finding implementations, understanding codebase patterns, or locating specific functionality.",
        "canBeReferencedInPrompt": true,
        "inputSchema": {
          "type": "object",
          "properties": {
            "query": {
              "type": "string",
              "description": "The search query to find relevant code. Can be a natural language description of what you're looking for, function names, or code patterns."
            },
            "limit": {
              "type": "number",
              "description": "Maximum number of results to return. Default is 5.",
              "default": 5
            }
          },
          "required": [
            "query"
          ]
        }
      },
      {
        "name": "agent-memory_index_file",
        "tags": [
          "memory",
          "index",
          "add"
        ],
        "toolReferenceName": "indexFile",
        "displayName": "Index File",
        "icon": "$(add)",
        "userDescription": "Add a file to the memory index for semantic search",
        "modelDescription": "Indexes a source code file into the memory database. The file is chunked intelligently based on its language (functions, classes, etc.) and embeddings are generated for each chunk. Once indexed, the file's content can be searched using the search_memory tool. Use this when you need to add a specific file to the searchable memory.",
        "canBeReferencedInPrompt": true,
        "inputSchema": {
          "type": "object",
          "properties": {
            "filepath": {
              "type": "string",
              "description": "The absolute path to the file to index. The file must exist and be readable."
            }
          },
          "required": [
            "filepath"
          ]
        }
      },
      {
        "name": "agent-memory_list_indexed",
        "tags": [
          "memory",
          "list",
          "files"
        ],
        "toolReferenceName": "listIndexed",
        "displayName": "List Indexed Files",
        "icon": "$(list-tree)",
        "userDescription": "List all files currently indexed in memory",
        "modelDescription": "Returns a list of all files that have been indexed into the memory database, along with the number of chunks for each file. Use this to see what code is currently available for searching, or to verify that a file has been indexed.",
        "canBeReferencedInPrompt": true,
        "inputSchema": {
          "type": "object",
          "properties": {}
        }
      },
      {
        "name": "agent-memory_clear_memory",
        "tags": [
          "memory",
          "clear",
          "delete"
        ],
        "toolReferenceName": "clearMemory",
        "displayName": "Clear Memory",
        "icon": "$(trash)",
        "userDescription": "Remove files from the memory index",
        "modelDescription": "Removes indexed files from the memory database. Can remove a specific file by providing its filepath, or clear all indexed files if no filepath is specified. Use with caution as this permanently removes the indexed data.",
        "canBeReferencedInPrompt": true,
        "inputSchema": {
          "type": "object",
          "properties": {
            "filepath": {
              "type": "string",
              "description": "Optional: The absolute path of a specific file to remove from the index. If not provided, ALL indexed files will be cleared."
            }
          }
        }
      }
    ],
    "configuration": {
      "title": "Agent Memory",
      "properties": {
        "agentMemory.storageScope": {
          "type": "string",
          "enum": [
            "global",
            "workspace"
          ],
          "default": "workspace",
          "description": "Where to store the memory index. 'global' shares memory across all VS Code instances. 'workspace' keeps it isolated to the current project."
        },
        "agentMemory.indexing.maxFileSize": {
          "type": "number",
          "default": 1048576,
          "description": "Maximum file size to index in bytes (default: 1MB)"
        },
        "agentMemory.indexing.maxFiles": {
          "type": "number",
          "default": 500,
          "description": "Maximum number of files to index in a folder"
        },
        "agentMemory.indexing.excludePatterns": {
          "type": "array",
          "default": [
            "**/node_modules/**",
            "**/dist/**",
            "**/build/**",
            "**/.git/**",
            "**/coverage/**",
            "**/*.min.js"
          ],
          "description": "Glob patterns for files to exclude from indexing"
        },
        "agentMemory.indexing.includeExtensions": {
          "type": "array",
          "default": [
            ".ts",
            ".tsx",
            ".js",
            ".jsx",
            ".py",
            ".java",
            ".c",
            ".cpp",
            ".go",
            ".rs"
          ],
          "description": "File extensions to include when indexing folders"
        }
      }
    }
  },
  "scripts": {
    "postinstall": "mkdir -p dist && cp node_modules/web-tree-sitter/tree-sitter.wasm dist/tree-sitter.wasm",
    "vscode:prepublish": "npm run package",
    "compile": "npm run check-types && node esbuild.js",
    "watch": "npm-run-all -p watch:*",
    "watch:esbuild": "node esbuild.js --watch",
    "watch:tsc": "tsc --noEmit --watch --project tsconfig.json",
    "package": "npm run check-types && node esbuild.js --production",
    "check-types": "tsc --noEmit",
    "pretest": "npm run compile && npm run lint",
    "lint": "eslint src",
    "test": "vscode-test",
    "release": "standard-version",
    "prepare": "husky"
  },
  "devDependencies": {
    "@commitlint/cli": "^20.2.0",
    "@commitlint/config-conventional": "^20.2.0",
    "@types/mocha": "^10.0.10",
    "@types/node": "22.x",
    "@types/uuid": "^10.0.0",
    "@types/vscode": "^1.106.1",
    "@vscode/test-cli": "^0.0.12",
    "@vscode/test-electron": "^2.5.2",
    "esbuild": "^0.27.1",
    "eslint": "^9.39.1",
    "husky": "^9.1.7",
    "npm-run-all": "^4.1.5",
    "standard-version": "^9.5.0",
    "typescript": "^5.9.3",
    "typescript-eslint": "^8.48.1"
  },
  "dependencies": {
    "@lancedb/lancedb": "^0.22.3",
    "@xenova/transformers": "^2.17.2",
    "uuid": "^13.0.0",
    "web-tree-sitter": "^0.25.10"
  }
}
